<!DOCTYPE html>
<!--<html xmlns:th="http://www.thymeleaf.org" th:with="lang=${#locale.language}" th:lang="${lang}">-->
<html xmlns:th="http://www.thymeleaf.org" th:lang="ru" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/header :: header(#{register.title})">
    <meta charset="UTF-8"/>
</head>

<body class="login">
<div class="login-wrapper">

    <div th:include="fragments/content :: locale"></div>

    <div th:include="fragments/content :: logo"></div>

    <div sec:authorize="${not isAuthenticated()}">
        <form class='flex' th:action="@{/register}" method="POST" th:object="${user}" autocomplete="off">
            <h1 th:text="#{register.title}">Регистрация1</h1>

            <div class="input flex-half-width">
                <input type="text" th:field="*{name}" th:placeholder="#{name}" required>
                <div class="error-message" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">errors</div>
            </div>
            <div class="input flex-half-width">
                <input type="text" th:field="*{surname}" th:placeholder="#{surname}">
                <div class="error-message" th:if="${#fields.hasErrors('surname')}" th:errors="*{surname}">errors</div>
            </div>

            <div class="input flex-full-width" th:classappend="${#fields.hasErrors('email')} ? error">
                <input type="text" th:field="*{email}" th:placeholder="#{emailorphone}" required>
                <div class="error-message" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">errors</div>
            </div>
            <div class="input flex-full-width" th:classappend="${#fields.hasErrors('password')} ? error">
                <input type="password" th:field="*{password}" th:placeholder="#{password}" required>
                <div class="error-message" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">errors</div>
            </div>
            <button class="flex-full-width submit" type="submit" th:text="#{register.title}">Регистрация</button>
        </form>
    </div>

    <div th:include="fragments/content :: loginlink" sec:authorize="${not isAuthenticated()}"></div>

    <div th:include="fragments/content :: restorelink" sec:authorize="${not isAuthenticated()}"></div>

    <div th:include="fragments/content :: social" sec:authorize="${not isAuthenticated()}"></div>

    <div sec:authorize="${isAuthenticated()}">
        <span sec:authentication="name"></span>
        <a href="#" th:href="@{/logout}" th:text="#{logout}">Выйти</a>
    </div>

    <div th:include="fragments/content :: license"></div>

</div>

</body>
</html>